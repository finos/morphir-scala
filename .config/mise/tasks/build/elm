#!/usr/bin/env -S scala-cli shebang -S 3
//MISE description="Build all Elm projects"
//> using dep com.lihaoyi::os-lib:0.11.4

object Main {
  def main(args: Array[String]): Unit = {
    println("Building Elm projects...")

    val elmProjectDirs = Seq(
      "examples/morphir-elm-projects/evaluator-tests",
      "examples/morphir-elm-projects/defaults-tests",
      "examples/morphir-elm-projects/finance",
      "morphir-elm/sdks/morphir-unit-test"
    )

    for (dir <- elmProjectDirs) {
      val projectDir = os.pwd / os.RelPath(dir)
      val morphirJson = projectDir / "morphir.json"
      if (os.exists(morphirJson)) {
        println(s"  Building $dir...")
        os.proc("morphir-elm", "make").call(cwd = projectDir)
      } else {
        println(s"  Skipping $dir (no morphir.json)")
      }
    }

    println("Elm build completed successfully")
  }
}
